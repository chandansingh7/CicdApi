spring.application.name=pos-mono-api
server.port=8080

# Pagination — faster initial load, prevents large requests
spring.data.web.pageable.default-page-size=10
spring.data.web.pageable.max-page-size=100

# Multipart uploads (product images)
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# Image storage — Azure Blob (prod) or local fallback (dev)
azure.storage.connection-string=${AZURE_STORAGE_CONNECTION_STRING:}
azure.storage.container=${AZURE_STORAGE_CONTAINER:pos-product-images}
# Local dev fallback: images served at this base URL
image.local.base-url=${IMAGE_BASE_URL:http://localhost:8080/api/images}

# Active profile — override via env var SPRING_PROFILES_ACTIVE=prod on Azure
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# JWT (shared across all profiles)
jwt.secret=${JWT_SECRET:3cfa76ef14937c1c0ea519f8fc057a80fcd04a7420f8e8bcd0a7567c272e007}
jwt.expiration=86400000

# CORS (shared) — add all frontend origins comma-separated in CORS_ORIGINS env var
cors.allowed-origins=${CORS_ORIGINS:http://localhost:4200,https://nice-plant-0f168160f.1.azurestaticapps.net,https://nice-plant-0f168160f.azurestaticapps.net}

# Swagger / OpenAPI (shared) 
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.api-docs.path=/v3/api-docs

# ─── Logging ──────────────────────────────────────────────────────────────────
# Application log level — override via env var: LOGGING_LEVEL_COM_POS=DEBUG
logging.level.com.pos=${LOGGING_LEVEL_COM_POS:INFO}

# Log file directory
#   Dev default : ./logs/
#   Azure       : set LOG_FILE_DIR=/home/LogFiles/Application via App Service env vars
log.file.dir=${LOG_FILE_DIR:./logs}

# Log shipper — uploads previous day's rolled log file to Azure Blob Storage
# Uses the same AZURE_STORAGE_CONNECTION_STRING as image storage.
# Set LOG_BLOB_CONTAINER to override; default logs go into a "pos-logs" container.
log.blob.container=${LOG_BLOB_CONTAINER:pos-logs}

# Hibernate batching for bulk inserts/updates (e.g. product bulk upload)
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Suppress Hibernate / HikariCP verbose output
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
